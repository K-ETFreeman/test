let giveElem=e=>(new DOMParser).parseFromString(e,"text/html").body.children[0],qall=(e,t=document)=>t.querySelectorAll(e),q=(e,t=document)=>t.querySelector(e);if(document.querySelector(".mainslider .swiper-container")){let e=document.querySelector(".mainslider .swiper-container"),t=document.querySelector(".header"),i=document.querySelector(".mainslider__pagination");new Swiper(".mainslider .swiper-container",{loop:!0,speed:600,pagination:{el:".mainslider .swiper-pagination",type:"bullets",clickable:!0},navigation:{nextEl:".mainslider__right",prevEl:".mainslider__left"},on:{slideChange:function(){setTimeout(()=>{e.querySelector(".swiper-slide-active .mainslide").classList.contains("mainslide_dark")?(t.classList.add("header_white"),i.classList.add("mainslider__pagination_white")):(t.classList.remove("header_white"),i.classList.remove("mainslider__pagination_white"))},200)}}})}let PH=document.querySelector(".phoneschedule"),phone=PH.querySelector(".phoneschedule__phone>a"),before=PH.querySelector(".droplist__item:not(.for9)");if(phone){let e=(new DOMParser).parseFromString(`<li class="for9 droplist__item"><a href='${phone.getAttribute("href")}' class='phoneschedule__phone'>${phone.innerText}<div class='phoneschedule__small'>${phone.getAttribute("data-descr")}</div></a></li>`,"text/html");phone2.classList.add("for9"),PH.querySelector(".droplist__list").insertBefore(e.querySelector("li"),before)}PH.querySelector(".droplist__list").addEventListener("click",e=>e.stopPropagation());let popup=document.querySelector(".popup"),popupwrap=popup.querySelector(".popup__wrapper"),popupcont=popup.querySelector(".popup__content");function showpopup(e){popupcont.textContent="",popupcont.append(e),window.requestAnimationFrame(()=>popup.classList.add("active"))}function clientmask(){Maska.create("#clienttel",{mask:"+7 (###) ###-##-##"});document.getElementById("clienttel").addEventListener("focus",(function(){""==this.value&&(this.value="+7 (")})),document.getElementById("clienttel").addEventListener("blur",(function(){"+7 ("==this.value&&(this.value="")}))}function filehandler(){let e=q('[type="file"]',popupcont),t=q(".coolinput__filenames",popupcont),i=0;if(e&&(e.onfocus=()=>setTimeout(()=>{""==e.value&&i-performance.now()<-150&&(t.style.removeProperty("color"),t.innerText="Файл не выбран")},100),e)){let l,r;e.addEventListener("change",()=>{if(l=10485760,r="",i=performance.now(),e.files.length>5)return t.style.setProperty("color","red"),t.innerText="Выберите не более 5 файлов",void(e.value="");Array.from(e.files).forEach((e,t)=>{var i=e.name,a=i.indexOf("\\")>=0?i.lastIndexOf("\\"):i.lastIndexOf("/"),s=i.substring(a);0!==s.indexOf("\\")&&0!==s.indexOf("/")||(s=s.substring(1)),r+=(t>0?", ":"")+s,l-=e.size}),l<0?(t.style.setProperty("color","red"),t.innerText="Суммарный вес файлов не должен превышать 10Мб",e.value=""):(t.style.removeProperty("color"),t.innerText=r||"Файл не выбран")})}}popupwrap.addEventListener("click",e=>e.stopPropagation());const forms=[{name:"form-ordercall.html",value:"",class:"ordercall"},{name:"form-writereview.html",value:"",class:"writereview"},{name:"form-askquestion.html",value:"",class:"askquestion"}];async function getForm(e){let t;return await fetch(e).then((function(e){return e.text()})).then((function(i){var l=(new DOMParser).parseFromString(i,"text/html");t=l.body.querySelector("form"),forms.forEach(i=>i.name==e&&(i.value=t))})).catch((function(e){console.log("Failed to fetch page: ",e)})),t}function CallPopup(e){showpopup(e),window.requestAnimationFrame(()=>setTimeout(clientmask,100)),window.requestAnimationFrame(()=>setTimeout(filehandler,100))}forms.forEach(e=>{q("."+e.class)&&getForm(e.name)});var orderCall=()=>CallPopup(forms[0].value),writeReview=()=>!!forms[1].value&&CallPopup(forms[1].value),askQuestion=()=>!!forms[2].value&&CallPopup(forms[2].value);if(document.querySelector(".testimonials .swiper-container")){new Swiper(".testimonials .swiper-container",{speed:600,autoHeight:!0,slidesPerView:1,spaceBetween:12,breakpoints:{768:{slidesPerView:2}},pagination:{el:".testimonials__pagination",type:"bullets",clickable:!0},navigation:{nextEl:".testimonials__right",prevEl:".testimonials__left"}})}document.querySelectorAll(".testimonial__btn").forEach(e=>e.addEventListener("click",()=>{let t=e.parentElement.cloneNode(!0);t.classList.add("inpopup");let i=t.querySelector(".testimonial__btn");i.innerText="Закрыть",i.addEventListener("click",()=>t.closest(".active").classList.remove("active")),showpopup(t)})),document.querySelectorAll(".selftrigger").forEach(e=>e.addEventListener("click",()=>e.classList.contains("parenttrigger")?e.parentElement.classList.toggle("active"):e.classList.toggle("active")));let items=document.querySelectorAll(".showtrigger"),tH=(e,t)=>{let i=e.style.getPropertyValue("max-height");i?"x"==i.slice(-1)?e.style.removeProperty("max-height"):(e.style.setProperty("max-height",e.scrollHeight+"px"),window.requestAnimationFrame(()=>{e.style.removeProperty("transition-duration"),window.requestAnimationFrame(()=>e.style.removeProperty("max-height"))})):(e.style.setProperty("max-height",e.scrollHeight+"px"),setTimeout(()=>{e.scrollHeight==e.offsetHeight&&e.style.setProperty("max-height","100%"),e.style.setProperty("transition-duration","0s")},t))};function hideImage(e,t,i){let l=e.getAttribute("style").match(/^.*px\)/)[0];l+=" scale(0);opacity:0;",e.style=l,i.classList.add("hidden")}function genSlide(e,t){let i=document.createElement("div"),l=document.createElement("div");return i.classList.add("swiper-slide"),i.appendChild(e),l.classList.add("slide-descr"),l.innerText=t,i.appendChild(l),i}function getData(e,t){let i=[];for(let l=t;l<e.length;l++)if(!e[l].classList.contains("hidden")){let t=e[l].img.cloneNode();t.setAttribute("class",""),i.push({img:t,text:e[l].descr.innerText})}for(let l=0;l<t;l++)if(!e[l].classList.contains("hidden")){let t=e[l].img.cloneNode();t.setAttribute("class",""),i.push({img:t,text:e[l].descr.innerText})}return i}function Ginit(e,t,i){let l=getData(t,i),r=e.querySelector(".swiper-wrapper");l.forEach(e=>r.appendChild(genSlide(e.img,e.text)));const a=new Swiper(e,{speed:400,spaceBetween:100});return e.classList.add("revealed"),a}function Gdestroy(e,t){t.classList.remove("revealed"),e.destroy()}items.forEach(e=>e.addEventListener("click",()=>{let t=e.getAttribute("data-cont")?e.closest(e.getAttribute("data-cont")):e.parentElement,i=e.getAttribute("data-el"),l=i?t.querySelector(i):t;tH(l,400)})),document.querySelectorAll(".close").forEach(e=>e.addEventListener("click",()=>e.closest(".active").classList.remove("active"))),qall(".counter").forEach(e=>{let t=q(".counter__minus",e),i=q(".counter__plus",e),l=q(".counter__input",e);i.addEventListener("click",()=>l.value=parseInt(l.value)+1),t.addEventListener("click",()=>l.value=Math.max(parseInt(l.value)-1,1))}),qall(".tabzone").forEach(e=>{let t=Array.from(qall(".tab",e)),i=Array.from(qall(".tabcontent",e)),l=q(".tab.active",e);t.forEach((e,r)=>e.addEventListener("click",()=>{i[t.indexOf(l)].classList.remove("active"),l.classList.remove("active"),l=e,e.classList.add("active"),i[r].classList.add("active")}))});let revealPhantom=(e,t,i)=>i.classList.remove("hidden"),revealImage=(e,t,i)=>e.style=`width:${i.offsetWidth}px;height:${i.offsetHeight}px;transform:translate(${i.offsetLeft}px,${i.offsetTop}px);`;document.querySelectorAll(".gallery").forEach(e=>{let t=Array.from(qall(".gallery__tabs button",e)),i=qall(".gallery__phantom",e),l=qall(".gallery__img img",e),r=q(".gallery__images",e),a=q(".swiper-container",e);i.forEach((e,t)=>{e.nums=e.getAttribute("data-tabs".split(",")),e.descr=e.querySelector(".gallery__imgdescr"),e.img=l[t],e.img.remove();let i=giveElem("<div class='gallery__node'><div class='gallery__img'></div></div>");i.querySelector(".gallery__img").appendChild(e.img),i.appendChild(e.descr.cloneNode(!0)),e.node=i,r.appendChild(i),revealImage(e.node,e.img,e)}),window.requestAnimationFrame(()=>e.classList.add("initialized")),t.forEach((t,l)=>t.addEventListener("click",()=>{q("button.active",e).classList.remove("active"),t.classList.add("active"),r.style.setProperty("height",r.offsetHeight+"px"),0==l?(i.forEach(e=>revealPhantom(e.node,e.img,e)),window.requestAnimationFrame(()=>i.forEach(e=>revealImage(e.node,e.img,e)))):(i.forEach(e=>-1==e.nums.indexOf(l)&&hideImage(e.node,e.img,e)),i.forEach(e=>-1!=e.nums.indexOf(l)&&revealPhantom(e.node,e.img,e)),window.requestAnimationFrame(()=>i.forEach(e=>-1!=e.nums.indexOf(l)&&revealImage(e.node,e.img,e))));let a=0;i.forEach(e=>e.offsetTop+e.offsetHeight>a?a=e.offsetTop+e.offsetHeight:0),window.requestAnimationFrame(()=>{r.style.setProperty("height",a+"px")})})),window.addEventListener("resize",()=>{e.classList.add("resized"),q("button.active",e).click(),window.requestAnimationFrame(()=>e.classList.remove("resized"))},{passive:!0}),i.forEach((e,t)=>e.node.addEventListener("click",()=>{Ginit(a,i,t)}))}),qall(".tocart").forEach(e=>{e.addEventListener("click",()=>{e.innerText="В корзине";let t=e.parentElement.offsetWidth;e.classList.add("active"),e.style.setProperty("width",t+"px")})});let activelist=[],nav={el:document.querySelector("nav.header__menu>ul"),setval:e=>nav.el.style.setProperty("transform",`translateX(${e}%)`),shiftForward:shiftForward=e=>{e.classList.add("active"),activelist.push(e);let t=nav.el.style.getPropertyValue("transform").match(/-?[1-9]00%/);nav.setval(t?parseInt(t[0])-100:-100)},shiftBack:shiftBack=()=>{let e=activelist.pop();e&&e.classList.remove("active");let t=nav.el.style.getPropertyValue("transform").match(/-?[1-9]00%/);nav.setval(t?parseInt(t[0])+100:0)}};{let e=q(".header"),t=q(".phoneschedule__phoneicon",e).cloneNode(!0),i=q(".phoneschedule__phone>a").cloneNode(!0),l=i.getAttribute("data-descr"),r=document.createElement("li"),a=document.createElement("ul"),s=()=>giveElem('<li class="droplist__item"></li>');a.classList.add("droplist__list"),r.classList.add("droplist","droplist_mobonly","droplist_special","droplist_phone"),i.className="";let n=i.cloneNode(!0);n.prepend(t),r.append(n);let o=s();i.append(giveElem(`<span>${l}</span>`)),o.append(i),a.append(o),qall(".droplist__item:not(.for9)",q(".phoneschedule .droplist__list",e)).forEach(e=>{let t=e.cloneNode(!0),i=q("a",t),l=q(".phoneschedule__small",t);i.className="";let r=document.createElement("span");r.innerText=l.innerText,l.remove(),i.append(r),a.append(t)});let c=s(),d=giveElem('<button class="callorder">Заказать звонок</button>');c.append(d),a.append(c),r.append(a),q(".header__menu>ul",e).append(r)}{let e=q(".header__address").cloneNode(!0);e.className="",e.classList.add("for9","header__mobadress"),q(".header__menu>ul").append(e)}nav.el.querySelectorAll(".droplist>a, .catlist__title").forEach(e=>e.addEventListener("click",t=>{window.innerWidth<992&&(t.preventDefault(),nav.shiftForward(e.parentElement))})),document.querySelectorAll(".header__menu .droplist").forEach(e=>{let t=e.querySelector("a"),i=e.querySelector(".droplist__list"),l=t.cloneNode(!1),r=e.classList.contains("droplist_phone");l.innerText=t.innerText,l=giveElem(`<li class='droplist__item droplist__item_head${r?" droplist__item_nolink":""}'>`+(r?"Телефоны":l.outerHTML)+"</li>");let a=giveElem("<li class='droplist__item droplist__item_back'><a href=\"\"><svg viewbox='0 0 17 12'><use href='#left'></use></svg> Назад</a></li>");i.prepend(l),i.prepend(a)}),qall(".catlist__text",nav.el).forEach(e=>{let t=q(".catlist__title",e),i=t.cloneNode(!1);i.innerText=t.innerText,i=giveElem("<li class='droplist__item droplist__item_head'>"+i.outerHTML+"</li>");let l=giveElem("<div class='droplist__item droplist__item_back'><a href=\"\"><svg viewbox='0 0 17 12'><use href='#left'></use></svg> Назад</a></div>"),r=q(".catlist__list",e);r.prepend(i),r.prepend(l)}),document.querySelectorAll(".header__menu .droplist__item_back").forEach(e=>e.addEventListener("click",e=>{e.preventDefault(),nav.shiftBack()})),document.querySelectorAll(".callorder").forEach(e=>e.addEventListener("click",orderCall)),document.querySelectorAll(".writereview").forEach(e=>e.addEventListener("click",writeReview)),document.querySelectorAll(".askquestion").forEach(e=>e.addEventListener("click",askQuestion));